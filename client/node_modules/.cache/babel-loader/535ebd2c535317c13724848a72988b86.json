{"ast":null,"code":"var _jsxFileName = \"/Users/esen/Desktop/FIBO homework/client/src/pages/category.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createCategory, updateCategory, deleteCategory } from '../redux/actions/categoryAction';\nimport NotFound from '../components/global/NotFound';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Category = () => {\n  _s();\n\n  var _auth$user;\n\n  const [name, setName] = useState('');\n  const [edit, setEdit] = useState(null);\n  const {\n    auth,\n    categories\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (edit) setName(edit.name);\n  }, [edit]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!auth.access_token || !name) return;\n\n    if (edit) {\n      if (edit.name === name) return;\n      const data = { ...edit,\n        name\n      };\n      dispatch(updateCategory(data, auth.access_token));\n    } else {\n      dispatch(createCategory(name, auth.access_token));\n    }\n\n    setName('');\n    setEdit(null);\n  };\n\n  const handleDelete = id => {\n    if (!auth.access_token) return;\n\n    if (window.confirm('Are you sure to delete this category?')) {\n      dispatch(deleteCategory(id, auth.access_token));\n    }\n  };\n\n  if (((_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.role) !== 'admin') return /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 42\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"category\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"category\",\n        children: \"Category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center\",\n        children: [edit && /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-times me-2 text-danger\",\n          style: {\n            cursor: 'pointer'\n          },\n          onClick: () => setEdit(null)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"category\",\n          id: \"category\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: edit ? 'Update' : 'Create'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: categories.map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category_row\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"m-0 text-capitalize\",\n          children: category.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-edit mx-2\",\n            onClick: () => setEdit(category)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-trash-alt\",\n            onClick: () => handleDelete(category._id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }, this)]\n      }, category._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Category, \"0DvoMgbyuueA0tbUataL1JfLVEk=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Category;\nexport default Category;\n\nvar _c;\n\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","createCategory","updateCategory","deleteCategory","NotFound","Category","name","setName","edit","setEdit","auth","categories","state","dispatch","handleSubmit","e","preventDefault","access_token","data","handleDelete","id","window","confirm","user","role","cursor","target","value","map","category","_id"],"sources":["/Users/esen/Desktop/FIBO homework/client/src/pages/category.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport { FormSubmit, RootStore, ICategory } from '../utils/TypeScript'\n\nimport { createCategory, updateCategory, deleteCategory } from '../redux/actions/categoryAction'\n\nimport NotFound from '../components/global/NotFound'\n\nconst Category = () => {\n  const [name, setName] = useState('')\n  const [edit, setEdit] = useState<ICategory | null>(null)\n\n  const { auth, categories } = useSelector((state: RootStore) => state)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if(edit) setName(edit.name)\n  },[edit])\n\n  const handleSubmit = (e: FormSubmit) => {\n    e.preventDefault()\n    if(!auth.access_token || !name) return;\n\n    if(edit){\n      if(edit.name === name) return;\n      const data = {...edit, name}\n      dispatch(updateCategory(data, auth.access_token))\n    }else{\n      dispatch(createCategory(name, auth.access_token))\n    }\n    setName('')\n    setEdit(null)\n  }\n\n\n  const handleDelete = (id: string) => {\n    if(!auth.access_token) return;\n    if(window.confirm('Are you sure to delete this category?')){\n      dispatch(deleteCategory(id, auth.access_token))\n    }\n  }\n\n\n  if(auth.user?.role !== 'admin') return <NotFound />\n  return (\n    <div className=\"category\">\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"category\">Category</label>\n\n        <div className=\"d-flex align-items-center\">\n          {\n            edit && <i className=\"fas fa-times me-2 text-danger\"\n            style={{cursor: 'pointer'}}\n            onClick={() => setEdit(null)} />\n          }\n          <input type=\"text\" name=\"category\" id=\"category\"\n          value={name} onChange={e => setName(e.target.value)} />\n\n          <button type=\"submit\">\n            { edit ? 'Update' : 'Create' }\n          </button>\n        </div>\n      </form>\n\n      <div>\n        {\n          categories.map(category => (\n            <div className=\"category_row\" key={category._id}>\n              <p className=\"m-0 text-capitalize\">{category.name}</p>\n\n              <div>\n                <i className=\"fas fa-edit mx-2\"\n                onClick={() => setEdit(category)} />\n                <i className=\"fas fa-trash-alt\"\n                onClick={() => handleDelete(category._id)} />\n              </div>\n            </div>\n          ))\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default Category\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}