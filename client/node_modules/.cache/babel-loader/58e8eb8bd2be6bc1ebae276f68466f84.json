{"ast":null,"code":"import { CREATE_COMMENT, GET_COMMENTS, REPLY_COMMENT, UPDATE_COMMENT, UPDATE_REPLY, DELETE_COMMENT, DELETE_REPLY } from '../types/commentType';\nconst initialState = {\n  data: [],\n  total: 1\n};\n\nconst commentReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CREATE_COMMENT:\n      return { ...state,\n        data: [action.payload, ...state.data]\n      };\n\n    case GET_COMMENTS:\n      return action.payload;\n\n    case REPLY_COMMENT:\n      return { ...state,\n        data: state.data.map(item => item._id === action.payload.comment_root ? { ...item,\n          replyCM: [action.payload, ...item.replyCM]\n        } : item)\n      };\n\n    case UPDATE_COMMENT:\n      return { ...state,\n        data: state.data.map(item => item._id === action.payload._id ? action.payload : item)\n      };\n\n    case UPDATE_REPLY:\n      return { ...state,\n        data: state.data.map(item => {\n          var _item$replyCM;\n\n          return item._id === action.payload.comment_root ? { ...item,\n            replyCM: (_item$replyCM = item.replyCM) === null || _item$replyCM === void 0 ? void 0 : _item$replyCM.map(rp => rp._id === action.payload._id ? action.payload : rp)\n          } : item;\n        })\n      };\n\n    case DELETE_COMMENT:\n      return { ...state,\n        data: state.data.filter(item => item._id !== action.payload._id)\n      };\n\n    case DELETE_REPLY:\n      return { ...state,\n        data: state.data.map(item => {\n          var _item$replyCM2;\n\n          return item._id === action.payload.comment_root ? { ...item,\n            replyCM: (_item$replyCM2 = item.replyCM) === null || _item$replyCM2 === void 0 ? void 0 : _item$replyCM2.filter(rp => rp._id !== action.payload._id)\n          } : item;\n        })\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default commentReducer;","map":{"version":3,"names":["CREATE_COMMENT","GET_COMMENTS","REPLY_COMMENT","UPDATE_COMMENT","UPDATE_REPLY","DELETE_COMMENT","DELETE_REPLY","initialState","data","total","commentReducer","state","action","type","payload","map","item","_id","comment_root","replyCM","rp","filter"],"sources":["/Users/esen/Desktop/FIBO homework/client/src/redux/reducers/commentReducer.ts"],"sourcesContent":["import {\n  ICommentState,\n  CREATE_COMMENT,\n  GET_COMMENTS,\n  REPLY_COMMENT,\n  UPDATE_COMMENT,\n  UPDATE_REPLY,\n  DELETE_COMMENT,\n  DELETE_REPLY,\n  ICommentType\n} from '../types/commentType'\n\nconst initialState = {\n  data: [],\n  total: 1\n}\n\n\nconst commentReducer = (\n  state: ICommentState = initialState,\n  action: ICommentType\n): ICommentState => {\n  switch(action.type){\n    case CREATE_COMMENT:\n      return{\n        ...state,\n        data: [action.payload, ...state.data]\n      }\n    \n    case GET_COMMENTS:\n      return action.payload\n\n    case REPLY_COMMENT:\n      return {\n        ...state,\n        data: state.data.map(item => (\n          item._id === action.payload.comment_root\n          ? {\n            ...item,\n            replyCM: [\n              action.payload,\n              ...item.replyCM\n            ]\n          }\n          : item\n        ))\n      }\n\n    case UPDATE_COMMENT:\n      return{\n        ...state,\n        data: state.data.map(item => (\n          item._id === action.payload._id\n          ? action.payload\n          : item\n        ))\n      }\n\n    case UPDATE_REPLY:\n      return{\n        ...state,\n        data: state.data.map(item => (\n          item._id === action.payload.comment_root\n          ? {\n            ...item,\n            replyCM: item.replyCM?.map(rp => (\n              rp._id === action.payload._id\n              ? action.payload\n              : rp\n            ))\n          }\n          : item\n        ))\n      }\n      \n    case DELETE_COMMENT:\n      return{\n        ...state,\n        data: state.data.filter(item => \n          item._id !== action.payload._id\n        )\n      }\n\n    case DELETE_REPLY:\n      return{\n        ...state,\n        data: state.data.map(item => (\n          item._id === action.payload.comment_root\n          ? {\n            ...item,\n            replyCM: item.replyCM?.filter(rp => (\n              rp._id !== action.payload._id\n            ))\n          }\n          : item\n        ))\n      }\n      \n    default:\n      return state\n  }\n}\n\n\nexport default commentReducer"],"mappings":"AAAA,SAEEA,cAFF,EAGEC,YAHF,EAIEC,aAJF,EAKEC,cALF,EAMEC,YANF,EAOEC,cAPF,EAQEC,YARF,QAUO,sBAVP;AAYA,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE,EADa;EAEnBC,KAAK,EAAE;AAFY,CAArB;;AAMA,MAAMC,cAAc,GAAG,CACrBC,KAAoB,GAAGJ,YADF,EAErBK,MAFqB,KAGH;EAClB,QAAOA,MAAM,CAACC,IAAd;IACE,KAAKb,cAAL;MACE,OAAM,EACJ,GAAGW,KADC;QAEJH,IAAI,EAAE,CAACI,MAAM,CAACE,OAAR,EAAiB,GAAGH,KAAK,CAACH,IAA1B;MAFF,CAAN;;IAKF,KAAKP,YAAL;MACE,OAAOW,MAAM,CAACE,OAAd;;IAEF,KAAKZ,aAAL;MACE,OAAO,EACL,GAAGS,KADE;QAELH,IAAI,EAAEG,KAAK,CAACH,IAAN,CAAWO,GAAX,CAAeC,IAAI,IACvBA,IAAI,CAACC,GAAL,KAAaL,MAAM,CAACE,OAAP,CAAeI,YAA5B,GACE,EACA,GAAGF,IADH;UAEAG,OAAO,EAAE,CACPP,MAAM,CAACE,OADA,EAEP,GAAGE,IAAI,CAACG,OAFD;QAFT,CADF,GAQEH,IATE;MAFD,CAAP;;IAeF,KAAKb,cAAL;MACE,OAAM,EACJ,GAAGQ,KADC;QAEJH,IAAI,EAAEG,KAAK,CAACH,IAAN,CAAWO,GAAX,CAAeC,IAAI,IACvBA,IAAI,CAACC,GAAL,KAAaL,MAAM,CAACE,OAAP,CAAeG,GAA5B,GACEL,MAAM,CAACE,OADT,GAEEE,IAHE;MAFF,CAAN;;IASF,KAAKZ,YAAL;MACE,OAAM,EACJ,GAAGO,KADC;QAEJH,IAAI,EAAEG,KAAK,CAACH,IAAN,CAAWO,GAAX,CAAeC,IAAI;UAAA;;UAAA,OACvBA,IAAI,CAACC,GAAL,KAAaL,MAAM,CAACE,OAAP,CAAeI,YAA5B,GACE,EACA,GAAGF,IADH;YAEAG,OAAO,mBAAEH,IAAI,CAACG,OAAP,kDAAE,cAAcJ,GAAd,CAAkBK,EAAE,IAC3BA,EAAE,CAACH,GAAH,KAAWL,MAAM,CAACE,OAAP,CAAeG,GAA1B,GACEL,MAAM,CAACE,OADT,GAEEM,EAHK;UAFT,CADF,GASEJ,IAVqB;QAAA,CAAnB;MAFF,CAAN;;IAgBF,KAAKX,cAAL;MACE,OAAM,EACJ,GAAGM,KADC;QAEJH,IAAI,EAAEG,KAAK,CAACH,IAAN,CAAWa,MAAX,CAAkBL,IAAI,IAC1BA,IAAI,CAACC,GAAL,KAAaL,MAAM,CAACE,OAAP,CAAeG,GADxB;MAFF,CAAN;;IAOF,KAAKX,YAAL;MACE,OAAM,EACJ,GAAGK,KADC;QAEJH,IAAI,EAAEG,KAAK,CAACH,IAAN,CAAWO,GAAX,CAAeC,IAAI;UAAA;;UAAA,OACvBA,IAAI,CAACC,GAAL,KAAaL,MAAM,CAACE,OAAP,CAAeI,YAA5B,GACE,EACA,GAAGF,IADH;YAEAG,OAAO,oBAAEH,IAAI,CAACG,OAAP,mDAAE,eAAcE,MAAd,CAAqBD,EAAE,IAC9BA,EAAE,CAACH,GAAH,KAAWL,MAAM,CAACE,OAAP,CAAeG,GADnB;UAFT,CADF,GAOED,IARqB;QAAA,CAAnB;MAFF,CAAN;;IAcF;MACE,OAAOL,KAAP;EA7EJ;AA+ED,CAnFD;;AAsFA,eAAeD,cAAf"},"metadata":{},"sourceType":"module"}