{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GoogleLogin = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nrequire(\"./public/styles.css\"); // export interface CustomWindow extends Window {\n//     gapi: any;\n// }\n// declare let window: CustomWindow;\n// declare global {\n//     interface Window { gapi: any; }\n// }\n\n\nvar GoogleLogin = function (_a) {\n  var client_id = _a.client_id,\n      scope = _a.scope,\n      longtitle = _a.longtitle,\n      cookiepolicy = _a.cookiepolicy,\n      height = _a.height,\n      theme = _a.theme,\n      onSuccess = _a.onSuccess,\n      onFailure = _a.onFailure,\n      isSignedIn = _a.isSignedIn;\n  react_1.useEffect(function () {\n    var script = document.createElement('script');\n    script.src = \"https://apis.google.com/js/platform.js\";\n    script.async = true;\n    script.defer = true;\n    script.addEventListener('load', function () {\n      var gapi = window.gapi;\n      gapi.load('auth2', function () {\n        var auth2 = gapi.auth2.init({\n          client_id: client_id,\n          cookiepolicy: cookiepolicy\n        });\n        gapi.signin2.render('my-signin2', {\n          'scope': scope,\n          'height': height,\n          'longtitle': longtitle,\n          'theme': theme,\n          'onsuccess': !auth2.isSignedIn.get() && onSuccess,\n          'onfailure': !auth2.isSignedIn.get() && onFailure\n        });\n\n        if (!isSignedIn) {\n          if (auth2.isSignedIn.get()) auth2.signOut();\n        }\n      });\n    });\n    document.body.appendChild(script);\n    return function () {\n      document.body.removeChild(script);\n    };\n  }, [client_id, scope, longtitle, cookiepolicy, theme, height, onSuccess, onFailure, isSignedIn]);\n  return react_1.default.createElement(\"div\", {\n    id: \"my-signin2\"\n  });\n};\n\nexports.GoogleLogin = GoogleLogin;\nexports.GoogleLogin.defaultProps = {\n  scope: 'profile email',\n  longtitle: true,\n  height: 50,\n  theme: 'dark',\n  isSignedIn: false,\n  onSuccess: function (googleUser) {\n    console.log(googleUser);\n  },\n  onFailure: function (error) {\n    console.log(error);\n  }\n};\nexports.default = exports.GoogleLogin;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACAA,+B,CAIA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAEO,IAAMC,WAAW,GAAG,UAACC,EAAD,EAUR;MATfC,SAAS;MACTC,KAAK;MACLC,SAAS;MACTC,YAAY;MACZC,MAAM;MACNC,KAAK;MACLC,SAAS;MACTC,SAAS;MACTC,UAAU;EAKVC,kBAAU;IACN,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;IAEAF,MAAM,CAACG,GAAP,GAAa,wCAAb;IACAH,MAAM,CAACI,KAAP,GAAe,IAAf;IACAJ,MAAM,CAACK,KAAP,GAAe,IAAf;IAEAL,MAAM,CAACM,gBAAP,CAAwB,MAAxB,EAAgC;MACpB,QAAI,GAAUC,MAAM,KAApB;MAERC,IAAI,CAACC,IAAL,CAAU,OAAV,EAAmB;QACf,IAAMC,KAAK,GAAGF,IAAI,CAACE,KAAL,CAAWC,IAAX,CAAgB;UAC1BrB,SAAS,WADiB;UAE1BG,YAAY;QAFc,CAAhB,CAAd;QAKAe,IAAI,CAACI,OAAL,CAAaC,MAAb,CAAoB,YAApB,EAAkC;UAC9B,SAAStB,KADqB;UAE9B,UAAUG,MAFoB;UAG9B,aAAaF,SAHiB;UAI9B,SAASG,KAJqB;UAK9B,aAAa,CAACe,KAAK,CAACZ,UAAN,CAAiBgB,GAAjB,EAAD,IAA2BlB,SALV;UAM9B,aAAa,CAACc,KAAK,CAACZ,UAAN,CAAiBgB,GAAjB,EAAD,IAA2BjB;QANV,CAAlC;;QASA,IAAG,CAACC,UAAJ,EAAe;UACX,IAAGY,KAAK,CAACZ,UAAN,CAAiBgB,GAAjB,EAAH,EAA2BJ,KAAK,CAACK,OAAN;QAC9B;MAEJ,CAnBD;IAoBH,CAvBD;IAyBAd,QAAQ,CAACe,IAAT,CAAcC,WAAd,CAA0BjB,MAA1B;IAEA,OAAO;MACHC,QAAQ,CAACe,IAAT,CAAcE,WAAd,CAA0BlB,MAA1B;IACH,CAFD;EAGH,CArCD,EAqCG,CAACV,SAAD,EAAYC,KAAZ,EAAmBC,SAAnB,EAA8BC,YAA9B,EAA4CE,KAA5C,EAAmDD,MAAnD,EAA2DE,SAA3D,EAAsEC,SAAtE,EAAiFC,UAAjF,CArCH;EAuCA,OACIC;IAAKoB,EAAE,EAAC;EAAR,EADJ;AAKH,CA1DM;;AAAMC,sBAAWhC,WAAX;AA6DbgC,oBAAYC,YAAZ,GAA2B;EACvB9B,KAAK,EAAE,eADgB;EAEvBC,SAAS,EAAE,IAFY;EAGvBE,MAAM,EAAC,EAHgB;EAIvBC,KAAK,EAAC,MAJiB;EAKvBG,UAAU,EAAC,KALY;EAMvBF,SAAS,EAAE,UAAC0B,UAAD,EAAgC;IACvCC,OAAO,CAACC,GAAR,CAAYF,UAAZ;EACH,CARsB;EASvBzB,SAAS,EAAE,UAAC4B,KAAD,EAAW;IAClBF,OAAO,CAACC,GAAR,CAAYC,KAAZ;EACH;AAXsB,CAA3B;AAcAL,kBAAeA,mBAAf","names":["require","GoogleLogin","_a","client_id","scope","longtitle","cookiepolicy","height","theme","onSuccess","onFailure","isSignedIn","react_1","script","document","createElement","src","async","defer","addEventListener","window","gapi","load","auth2","init","signin2","render","get","signOut","body","appendChild","removeChild","id","exports","defaultProps","googleUser","console","log","error"],"sourceRoot":"","sources":["../src/index.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}