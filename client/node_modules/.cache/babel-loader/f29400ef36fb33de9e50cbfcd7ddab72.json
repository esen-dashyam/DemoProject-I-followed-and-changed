{"ast":null,"code":"var _jsxFileName = \"/Users/esen/Desktop/MERN stack/client/src/pages/blog/[slug].tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { getAPI } from '../../utils/FetchData';\nimport Loading from '../../components/global/Loading';\nimport { showErrMsg } from '../../components/alert/Alert';\nimport DisplayBlog from '../../components/blog/DisplayBlog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DetailBlog = () => {\n  _s();\n\n  const id = useParams().slug;\n  const {\n    socket\n  } = useSelector(state => state);\n  const [blog, setBlog] = useState();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    if (!id) return;\n    setLoading(true);\n    getAPI(`blog/${id}`).then(res => {\n      setBlog(res.data);\n      setLoading(false);\n    }).catch(err => {\n      setError(err.response.data.msg);\n      setLoading(false);\n    });\n    return () => setBlog(undefined);\n  }, [id]); // Join Room\n\n  useEffect(() => {\n    if (!id || !socket) return;\n    socket.emit('joinRoom', id);\n    return () => {\n      socket.emit('outRoom', id);\n    };\n  }, [socket, id]);\n  if (loading) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 22\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"my-4\",\n    children: [error && showErrMsg(error), blog && /*#__PURE__*/_jsxDEV(DisplayBlog, {\n      blog: blog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DetailBlog, \"hsNDent0IlpLuBdqz/lz2/R6hoM=\", false, function () {\n  return [useParams, useSelector];\n});\n\n_c = DetailBlog;\nexport default DetailBlog;\n\nvar _c;\n\n$RefreshReg$(_c, \"DetailBlog\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useSelector","getAPI","Loading","showErrMsg","DisplayBlog","DetailBlog","id","slug","socket","state","blog","setBlog","loading","setLoading","error","setError","then","res","data","catch","err","response","msg","undefined","emit"],"sources":["/Users/esen/Desktop/MERN stack/client/src/pages/blog/[slug].tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { useSelector } from 'react-redux'\n\nimport { IParams, IBlog, RootStore } from '../../utils/TypeScript'\nimport { getAPI } from '../../utils/FetchData'\n\nimport Loading from '../../components/global/Loading'\nimport { showErrMsg } from '../../components/alert/Alert'\nimport DisplayBlog from '../../components/blog/DisplayBlog'\n\nconst DetailBlog = () => {\n  const id = useParams<IParams>().slug\n  const { socket } = useSelector((state: RootStore) => state)\n\n  const [blog, setBlog] = useState<IBlog>()\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n\n  useEffect(() => {\n    if(!id) return;\n\n    setLoading(true)\n\n    getAPI(`blog/${id}`)\n    .then(res => {\n      setBlog(res.data)\n      setLoading(false)\n    })\n    .catch(err => {\n      setError(err.response.data.msg)\n      setLoading(false)\n    })\n\n    return () => setBlog(undefined)\n  },[id])\n\n  // Join Room\n  useEffect(() => {\n    if(!id || !socket) return;\n    socket.emit('joinRoom', id)\n\n    return () => {\n      socket.emit('outRoom', id)\n    }\n  },[socket, id])\n  \n\n  if(loading) return <Loading />;\n  return (\n    <div className=\"my-4\">\n      { error && showErrMsg(error) }\n      \n      { blog && <DisplayBlog blog={blog} /> }\n\n    </div>\n  )\n}\n\nexport default DetailBlog\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,WAAT,QAA4B,aAA5B;AAGA,SAASC,MAAT,QAAuB,uBAAvB;AAEA,OAAOC,OAAP,MAAoB,iCAApB;AACA,SAASC,UAAT,QAA2B,8BAA3B;AACA,OAAOC,WAAP,MAAwB,mCAAxB;;;AAEA,MAAMC,UAAU,GAAG,MAAM;EAAA;;EACvB,MAAMC,EAAE,GAAGP,SAAS,GAAYQ,IAAhC;EACA,MAAM;IAAEC;EAAF,IAAaR,WAAW,CAAES,KAAD,IAAsBA,KAAvB,CAA9B;EAEA,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBd,QAAQ,EAAhC;EACA,MAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM,CAACiB,KAAD,EAAQC,QAAR,IAAoBlB,QAAQ,CAAC,EAAD,CAAlC;EAEAC,SAAS,CAAC,MAAM;IACd,IAAG,CAACQ,EAAJ,EAAQ;IAERO,UAAU,CAAC,IAAD,CAAV;IAEAZ,MAAM,CAAE,QAAOK,EAAG,EAAZ,CAAN,CACCU,IADD,CACMC,GAAG,IAAI;MACXN,OAAO,CAACM,GAAG,CAACC,IAAL,CAAP;MACAL,UAAU,CAAC,KAAD,CAAV;IACD,CAJD,EAKCM,KALD,CAKOC,GAAG,IAAI;MACZL,QAAQ,CAACK,GAAG,CAACC,QAAJ,CAAaH,IAAb,CAAkBI,GAAnB,CAAR;MACAT,UAAU,CAAC,KAAD,CAAV;IACD,CARD;IAUA,OAAO,MAAMF,OAAO,CAACY,SAAD,CAApB;EACD,CAhBQ,EAgBP,CAACjB,EAAD,CAhBO,CAAT,CARuB,CA0BvB;;EACAR,SAAS,CAAC,MAAM;IACd,IAAG,CAACQ,EAAD,IAAO,CAACE,MAAX,EAAmB;IACnBA,MAAM,CAACgB,IAAP,CAAY,UAAZ,EAAwBlB,EAAxB;IAEA,OAAO,MAAM;MACXE,MAAM,CAACgB,IAAP,CAAY,SAAZ,EAAuBlB,EAAvB;IACD,CAFD;EAGD,CAPQ,EAOP,CAACE,MAAD,EAASF,EAAT,CAPO,CAAT;EAUA,IAAGM,OAAH,EAAY,oBAAO,QAAC,OAAD;IAAA;IAAA;IAAA;EAAA,QAAP;EACZ,oBACE;IAAK,SAAS,EAAC,MAAf;IAAA,WACIE,KAAK,IAAIX,UAAU,CAACW,KAAD,CADvB,EAGIJ,IAAI,iBAAI,QAAC,WAAD;MAAa,IAAI,EAAEA;IAAnB;MAAA;MAAA;MAAA;IAAA,QAHZ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAQD,CA9CD;;GAAML,U;UACON,S,EACQC,W;;;KAFfK,U;AAgDN,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}